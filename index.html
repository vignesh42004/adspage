<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Download Movie</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé¨</text></svg>">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    }

    .card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 24px;
      padding: 48px 32px;
      max-width: 420px;
      width: 100%;
      text-align: center;
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
    }

    .icon {
      width: 100px;
      height: 100px;
      background: linear-gradient(135deg, #e94560 0%, #ff6b6b 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 28px;
      font-size: 50px;
      box-shadow: 0 10px 40px rgba(233, 69, 96, 0.4);
    }

    h1 {
      color: #1a1a2e;
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #888;
      font-size: 14px;
      margin-bottom: 24px;
    }

    .file-info {
      background: #f8f9fa;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 32px;
    }

    .file-name {
      color: #1a1a2e;
      font-size: 16px;
      font-weight: 600;
      word-break: break-all;
      margin-bottom: 8px;
    }

    .file-meta {
      display: flex;
      justify-content: center;
      gap: 20px;
      color: #666;
      font-size: 13px;
    }

    .file-meta span {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    /* Timer */
    .timer-container {
      position: relative;
      width: 130px;
      height: 130px;
      margin: 0 auto 28px;
    }

    .timer-ring {
      transform: rotate(-90deg);
    }

    .timer-ring circle {
      fill: none;
      stroke-width: 10;
    }

    .timer-bg {
      stroke: #e8e8e8;
    }

    .timer-progress {
      stroke: url(#timerGradient);
      stroke-linecap: round;
      stroke-dasharray: 339;
      stroke-dashoffset: 339;
      transition: stroke-dashoffset 1s linear;
    }

    .timer-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 40px;
      font-weight: 700;
      color: #e94560;
    }

    .status {
      color: #666;
      font-size: 14px;
      margin-bottom: 24px;
    }

    /* Download Button */
    .btn-download {
      display: none;
      width: 100%;
      padding: 18px 32px;
      font-size: 18px;
      font-weight: 600;
      border: none;
      border-radius: 16px;
      cursor: pointer;
      background: linear-gradient(135deg, #e94560 0%, #ff6b6b 100%);
      color: white;
      transition: all 0.3s ease;
      box-shadow: 0 8px 30px rgba(233, 69, 96, 0.4);
    }

    .btn-download:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 40px rgba(233, 69, 96, 0.5);
    }

    .btn-download.show {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      animation: slideUp 0.5s ease;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* How to download */
    .instructions {
      margin-top: 24px;
      padding: 16px;
      background: #fff3cd;
      border-radius: 12px;
      font-size: 13px;
      color: #856404;
      display: none;
    }

    .instructions.show {
      display: block;
    }

    /* Ad Section */
    .ad-section {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid #eee;
    }

    .ad-label {
      font-size: 10px;
      color: #ccc;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      margin-bottom: 12px;
    }

    .ad-box {
      min-height: 100px;
      background: #f8f9fa;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ad-placeholder {
      color: #ddd;
      font-size: 12px;
    }

    /* Error */
    .error-state {
      display: none;
    }

    .error-state.show {
      display: block;
    }

    .error-icon {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);
    }

    .main-state.hidden {
      display: none;
    }

    /* Mobile */
    @media (max-width: 480px) {
      .card {
        padding: 36px 24px;
      }
      h1 {
        font-size: 20px;
      }
      .file-meta {
        flex-direction: column;
        gap: 8px;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <!-- Error State -->
    <div class="error-state" id="errorState">
      <div class="icon error-icon">‚ùå</div>
      <h1>Link Invalid</h1>
      <p class="subtitle">This link is invalid or expired.</p>
      <p style="color: #666; margin-top: 20px;">
        Please request a new link from<br>
        <strong>@YourBotUsername</strong>
      </p>
    </div>

    <!-- Main State -->
    <div class="main-state" id="mainState">
      <div class="icon">üé¨</div>
      
      <h1>Your Movie is Ready!</h1>
      <p class="subtitle">High quality download link generated</p>

      <div class="file-info">
        <p class="file-name" id="fileName">Loading...</p>
        <div class="file-meta">
          <span id="fileSize">üì¶ --</span>
          <span id="fileQuality">üé• --</span>
        </div>
      </div>

      <div class="timer-container" id="timerContainer">
        <svg class="timer-ring" width="130" height="130" viewBox="0 0 130 130">
          <defs>
            <linearGradient id="timerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#e94560"/>
              <stop offset="100%" stop-color="#ff6b6b"/>
            </linearGradient>
          </defs>
          <circle class="timer-bg" cx="65" cy="65" r="54"/>
          <circle class="timer-progress" id="timerProgress" cx="65" cy="65" r="54"/>
        </svg>
        <span class="timer-text" id="timerText">5</span>
      </div>

      <p class="status" id="status">‚è≥ Preparing your download...</p>

      <button class="btn-download" id="btnDownload">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12,16L19,9H15V4H9V9H5L12,16M5,20V18H19V20H5Z"/>
        </svg>
        Download Movie
      </button>

      <div class="instructions" id="instructions">
        üí° <strong>Tip:</strong> If download doesn't start, 
        right-click the button and select "Save link as..."
      </div>

      <!-- Ad Section -->
      <div class="ad-section">
        <p class="ad-label">Sponsored</p>
        <div class="ad-box" id="adBox">
          <!--
            =============================================
            PASTE YOUR ADSTERRA NATIVE AD CODE HERE
            =============================================
          -->
          <span class="ad-placeholder">Advertisement</span>
        </div>
      </div>
    </div>
  </div>

  <!--
    =============================================
    PASTE YOUR POPUNDER AD CODE HERE (Optional)
    =============================================
  -->

  <script>
    (function() {
      // Get URL parameters
      const params = new URLSearchParams(window.location.search);
      const fileUrl = params.get('url');
      const fileName = params.get('name') || 'Movie';
      const fileSize = params.get('size') || '';
      const quality = params.get('quality') || '';

      // DOM Elements
      const errorState = document.getElementById('errorState');
      const mainState = document.getElementById('mainState');
      const fileNameEl = document.getElementById('fileName');
      const fileSizeEl = document.getElementById('fileSize');
      const fileQualityEl = document.getElementById('fileQuality');
      const timerContainer = document.getElementById('timerContainer');
      const timerProgress = document.getElementById('timerProgress');
      const timerText = document.getElementById('timerText');
      const status = document.getElementById('status');
      const btnDownload = document.getElementById('btnDownload');
      const instructions = document.getElementById('instructions');

      // Validate URL
      if (!fileUrl) {
        errorState.classList.add('show');
        mainState.classList.add('hidden');
        return;
      }

      // Display file info
      try {
        fileNameEl.textContent = decodeURIComponent(fileName);
        fileSizeEl.textContent = 'üì¶ ' + (fileSize ? decodeURIComponent(fileSize) : 'Unknown');
        fileQualityEl.textContent = 'üé• ' + (quality ? decodeURIComponent(quality) : 'HD');
      } catch (e) {
        fileNameEl.textContent = fileName;
      }

      // Timer
      const WAIT_TIME = 5;
      let remaining = WAIT_TIME;
      const circumference = 2 * Math.PI * 54;

      function updateTimer() {
        const progress = (WAIT_TIME - remaining) / WAIT_TIME;
        timerProgress.style.strokeDashoffset = circumference * (1 - progress);
      }

      const countdown = setInterval(function() {
        remaining--;
        timerText.textContent = remaining;
        updateTimer();

        if (remaining <= 0) {
          clearInterval(countdown);
          showDownload();
        }
      }, 1000);

      function showDownload() {
        timerContainer.style.display = 'none';
        status.style.display = 'none';
        btnDownload.classList.add('show');
        instructions.classList.add('show');
      }

      // Download click
      btnDownload.addEventListener('click', function() {
        try {
          const decoded = decodeURIComponent(fileUrl);
          window.location.href = decoded;
        } catch (e) {
          window.location.href = fileUrl;
        }

        /*
        // Optional: Adsterra Direct Link for extra revenue
        // Uncomment and add your direct link:
        
        window.open('YOUR_ADSTERRA_DIRECT_LINK', '_blank');
        setTimeout(function() {
          window.location.href = decodeURIComponent(fileUrl);
        }, 500);
        */
      });
    })();
  </script>
</body>
</html>
