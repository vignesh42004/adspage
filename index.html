<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify - Get Your File</title>
    
    <!-- ADSTERRA SOCIAL BAR -->
    <!--
    <script type="text/javascript" src="//pl[YOUR_ID].profitablegatecpm.com/xxxxx.js"></script>
    -->
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%);
            min-height: 100vh;
            color: #fff;
        }
        
        .page-wrapper {
            display: flex;
            min-height: 100vh;
        }
        
        .sidebar-left, .sidebar-right {
            display: none;
            width: 180px;
            padding: 20px 10px;
            flex-direction: column;
            gap: 20px;
            align-items: center;
            position: sticky;
            top: 0;
            height: 100vh;
        }
        
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
        }
        
        .ad-wrapper {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .ad-label {
            font-size: 9px;
            color: #444;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        
        .native-banner { width: 100%; max-width: 728px; min-height: 90px; margin-bottom: 15px; }
        .banner-320x50 { width: 320px; height: 50px; margin: 10px 0; }
        .banner-300x250 { width: 300px; height: 250px; margin: 15px 0; }
        .banner-728x90 { display: none; width: 728px; height: 90px; margin: 15px 0; }
        .banner-468x60 { display: none; width: 468px; height: 60px; margin: 15px 0; }
        .banner-160x600 { width: 160px; height: 600px; }
        .banner-160x300 { width: 160px; height: 300px; }
        
        .container {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 35px 25px;
            text-align: center;
            max-width: 450px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 15px 0;
        }
        
        .loading-container { padding: 50px 20px; }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: #00d4ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 25px;
        }
        
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .loading-text { color: #aaa; font-size: 15px; }
        
        .blocked-container { display: none; }
        .blocked-container.show { display: block; animation: fadeIn 0.5s ease; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .blocked-icon { font-size: 70px; margin-bottom: 20px; }
        .blocked-title { font-size: 22px; font-weight: bold; margin-bottom: 15px; }
        .blocked-title.adblock { color: #ff4444; }
        .blocked-title.vpn { color: #ff8800; }
        
        .blocked-message {
            font-size: 14px;
            color: #bbb;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .blocked-box {
            background: rgba(255, 68, 68, 0.1);
            border: 1px solid rgba(255, 68, 68, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }
        
        .blocked-box.vpn {
            background: rgba(255, 136, 0, 0.1);
            border-color: rgba(255, 136, 0, 0.3);
        }
        
        .blocked-box h4 { font-size: 14px; margin-bottom: 10px; color: #ff6b6b; }
        .blocked-box.vpn h4 { color: #ff8800; }
        .blocked-box p { font-size: 13px; color: #999; line-height: 1.5; }
        
        .steps-list {
            list-style: none;
            margin: 20px 0;
            text-align: left;
        }
        
        .steps-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #ccc;
        }
        
        .steps-list li:last-child { border-bottom: none; }
        
        .step-num {
            background: rgba(255, 255, 255, 0.1);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            flex-shrink: 0;
        }
        
        .refresh-btn {
            background: linear-gradient(135deg, #00d4ff, #00ff88);
            color: #000;
            border: none;
            padding: 16px 40px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }
        
        .warning-note {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            font-size: 12px;
            color: #777;
        }
        
        .main-container { display: none; }
        .main-container.show { display: block; animation: fadeIn 0.5s ease; }
        
        .verified-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(0, 255, 136, 0.1);
            color: #00ff88;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            margin-bottom: 20px;
        }
        
        .movie-icon {
            font-size: 65px;
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        h1 {
            font-size: 22px;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #fff, #00d4ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .movie-name {
            color: #00d4ff;
            font-size: 16px;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 20px;
            display: inline-block;
            word-break: break-word;
        }
        
        .file-info {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .file-info-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 15px;
            border-radius: 10px;
            font-size: 13px;
            color: #aaa;
        }
        
        .file-info-item span { color: #00d4ff; font-weight: 600; }
        
        .timer {
            font-size: 60px;
            font-weight: bold;
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 25px 0;
        }
        
        .timer.ready {
            background: linear-gradient(135deg, #00ff88, #00d4ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ffa500, #00d4ff, #00ff88);
            background-size: 200% 100%;
            border-radius: 8px;
            transition: width 1s linear;
            width: 0%;
        }
        
        .status { font-size: 14px; color: #aaa; margin: 15px 0; }
        
        .steps-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
        }
        
        .step-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            color: #555;
            font-size: 14px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .step-item:last-child { border-bottom: none; }
        .step-item.active { color: #00d4ff; }
        .step-item.done { color: #00ff88; }
        
        .step-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .step-item.active .step-icon {
            background: rgba(0, 212, 255, 0.2);
            animation: pulse 1.5s infinite;
        }
        
        .step-item.done .step-icon { background: rgba(0, 255, 136, 0.2); }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .btn-container {
            display: none;
            flex-direction: column;
            gap: 12px;
            align-items: center;
            margin-top: 25px;
        }
        
        .btn-container.show { display: flex; animation: fadeIn 0.5s ease; }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
        }
        
        .dot.active { background: #ff6b6b; transform: scale(1.2); }
        .dot.done { background: #00ff88; }
        
        .action-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 16px 45px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 50px;
            text-decoration: none;
            transition: all 0.3s;
            width: 100%;
            max-width: 300px;
            border: none;
            cursor: pointer;
        }
        
        .btn-step1 {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: #fff;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
        }
        
        .btn-step2 {
            background: linear-gradient(135deg, #00d4ff, #00ff88);
            color: #000;
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }
        
        .action-btn:hover { transform: translateY(-3px); }
        
        .hidden { display: none !important; }
        
        .note { font-size: 12px; color: #666; margin-top: 15px; line-height: 1.5; }
        .note strong { color: #00d4ff; }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #444;
            font-size: 11px;
            margin-top: auto;
        }
        
        .debug-info {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            color: #0f0;
            padding: 10px;
            font-size: 11px;
            font-family: monospace;
            border-radius: 5px;
            z-index: 9999;
            max-width: 300px;
        }
        
        @media (min-width: 1024px) {
            .sidebar-left, .sidebar-right { display: flex; }
            .banner-320x50 { display: none; }
            .banner-728x90 { display: flex; }
            .banner-468x60 { display: flex; }
            .container { padding: 40px 35px; }
            h1 { font-size: 26px; }
            .timer { font-size: 70px; }
        }
        
        @media (min-width: 768px) and (max-width: 1023px) {
            .banner-468x60 { display: flex; }
            .banner-320x50 { display: none; }
        }
        
        @media (max-width: 359px) {
            .container { padding: 25px 18px; }
            .timer { font-size: 48px; }
            .action-btn { padding: 14px 30px; font-size: 14px; }
            .banner-320x50 { width: 300px; }
        }
    </style>
</head>
<body>

    <!-- DEBUG INFO (Remove in production) -->
    <div class="debug-info" id="debugInfo">
        Loading checks...
    </div>

    <div class="page-wrapper">
        
        <!-- LEFT SIDEBAR -->
        <aside class="sidebar-left">
            <div class="ad-wrapper banner-160x600">
                <div class="ad-label">Ad</div>
                <div style="width:160px;height:600px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#333;font-size:11px;">160Ã—600</div>
            </div>
        </aside>
        
        <!-- MAIN -->
        <main class="main-content">
            
            <div class="ad-wrapper native-banner">
                <div class="ad-label">Sponsored</div>
                <div style="width:100%;height:70px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#333;font-size:11px;">Native 4:1</div>
            </div>
            
            <div class="ad-wrapper banner-320x50">
                <div style="width:320px;height:50px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#333;font-size:11px;">320Ã—50</div>
            </div>
            
            <div class="ad-wrapper banner-728x90">
                <div class="ad-label">Ad</div>
                <div style="width:728px;height:90px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#333;font-size:11px;">728Ã—90</div>
            </div>
            
            <!-- CONTAINER -->
            <div class="container">
                
                <!-- LOADING -->
                <div class="loading-container" id="loadingContainer">
                    <div class="spinner"></div>
                    <p class="loading-text">ğŸ” Checking connection...</p>
                </div>
                
                <!-- ADBLOCK -->
                <div class="blocked-container" id="adblockBlocked">
                    <div class="blocked-icon">ğŸš«</div>
                    <h2 class="blocked-title adblock">AdBlock Detected!</h2>
                    <p class="blocked-message">Please disable your ad blocker to continue.</p>
                    
                    <div class="blocked-box">
                        <h4>ğŸ’¡ Why?</h4>
                        <p>Ads help us keep this service free.</p>
                    </div>
                    
                    <ul class="steps-list">
                        <li><span class="step-num">1</span> Click AdBlock icon</li>
                        <li><span class="step-num">2</span> Pause on this site</li>
                        <li><span class="step-num">3</span> Refresh page</li>
                    </ul>
                    
                    <button class="refresh-btn" onclick="location.reload()">ğŸ”„ Refresh</button>
                </div>
                
                <!-- VPN -->
                <div class="blocked-container" id="vpnBlocked">
                    <div class="blocked-icon">ğŸŒ</div>
                    <h2 class="blocked-title vpn">VPN/Proxy Detected!</h2>
                    <p class="blocked-message">Please disconnect VPN to continue.</p>
                    
                    <div class="blocked-box vpn">
                        <h4>ğŸ”’ Why?</h4>
                        <p>Direct connection required for verification.</p>
                    </div>
                    
                    <ul class="steps-list">
                        <li><span class="step-num">1</span> Open VPN app</li>
                        <li><span class="step-num">2</span> Disconnect</li>
                        <li><span class="step-num">3</span> Refresh page</li>
                    </ul>
                    
                    <button class="refresh-btn" onclick="location.reload()">ğŸ”„ Refresh</button>
                </div>
                
                <!-- BOTH -->
                <div class="blocked-container" id="bothBlocked">
                    <div class="blocked-icon">â›”</div>
                    <h2 class="blocked-title adblock">Access Blocked!</h2>
                    <p class="blocked-message">Disable AdBlock AND VPN to continue.</p>
                    
                    <div class="blocked-box">
                        <p>âŒ AdBlock Detected</p>
                        <p>âŒ VPN/Proxy Detected</p>
                    </div>
                    
                    <button class="refresh-btn" onclick="location.reload()">ğŸ”„ Refresh</button>
                </div>
                
                <!-- MAIN -->
                <div class="main-container" id="mainContainer">
                    <div class="verified-badge">âœ… Verified</div>
                    
                    <div class="movie-icon">ğŸ¬</div>
                    <h1>Your File is Ready!</h1>
                    <p class="movie-name" id="movieName">Loading...</p>
                    
                    <div class="file-info">
                        <div class="file-info-item" id="qualityInfo" style="display:none;">ğŸï¸ <span id="qualityText"></span></div>
                        <div class="file-info-item" id="sizeInfo" style="display:none;">ğŸ“ <span id="sizeText"></span></div>
                    </div>
                    
                    <div class="timer" id="timer">20</div>
                    
                    <div class="progress-bar">
                        <div class="progress" id="progress"></div>
                    </div>
                    
                    <p class="status" id="status">ğŸ” Preparing...</p>
                    
                    <div class="steps-container">
                        <div class="step-item active" id="stepVerify">
                            <div class="step-icon">1</div><span>Verifying...</span>
                        </div>
                        <div class="step-item" id="stepLoad">
                            <div class="step-icon">2</div><span>Loading...</span>
                        </div>
                        <div class="step-item" id="stepReady">
                            <div class="step-icon">3</div><span>Ready!</span>
                        </div>
                    </div>
                    
                    <div class="ad-wrapper banner-300x250" style="margin:20px auto;">
                        <div class="ad-label">Ad</div>
                        <div style="width:300px;height:250px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#333;font-size:11px;">300Ã—250</div>
                    </div>
                    
                    <div class="btn-container" id="btnContainer">
                        <div class="step-indicator">
                            <div class="dot active" id="dot1"></div>
                            <div class="dot" id="dot2"></div>
                        </div>
                        
                        <a href="#" class="action-btn btn-step1" id="btnStep1" onclick="return completeStep1()">
                            ğŸ‘† Step 1: Verify
                        </a>
                        
                        <a href="#" class="action-btn btn-step2 hidden" id="btnStep2">
                            ğŸ“¥ Step 2: Get File
                        </a>
                        
                        <p class="note" id="noteText">Complete verification</p>
                    </div>
                </div>
                
            </div>
            
            <div class="ad-wrapper banner-468x60">
                <div class="ad-label">Ad</div>
                <div style="width:468px;height:60px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#333;font-size:11px;">468Ã—60</div>
            </div>
            
            <div class="ad-wrapper banner-300x250">
                <div class="ad-label">Sponsored</div>
                <div style="width:300px;height:250px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#333;font-size:11px;">300Ã—250</div>
            </div>
            
            <footer class="footer">Â© 2024 Movie Bot</footer>
            
        </main>
        
        <!-- RIGHT SIDEBAR -->
        <aside class="sidebar-right">
            <div class="ad-wrapper banner-160x300">
                <div class="ad-label">Ad</div>
                <div style="width:160px;height:300px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#333;font-size:11px;">160Ã—300</div>
            </div>
            <div class="ad-wrapper banner-160x300">
                <div class="ad-label">Ad</div>
                <div style="width:160px;height:300px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#333;font-size:11px;">160Ã—300</div>
            </div>
            <div class="ad-wrapper banner-160x600">
                <div class="ad-label">Ad</div>
                <div style="width:160px;height:600px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#333;font-size:11px;">160Ã—600</div>
            </div>
        </aside>
        
    </div>

    <script>
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                        CONFIGURATION                               â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const ADSTERRA_SMART_LINK = "https://www.profitabledisplaynetwork.com/YOUR_ID";
        const BOT_USERNAME = "YourBotUsername";
        const WAIT_TIME = 20;
        const DEBUG_MODE = true; // Set to false in production
        
        let adBlockDetected = false;
        let vpnDetected = false;
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                        DEBUG LOGGER                                â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function updateDebug(text) {
            if (DEBUG_MODE) {
                document.getElementById('debugInfo').innerHTML = text;
            }
        }
        
        function log(msg) {
            console.log('[Detector] ' + msg);
        }
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                    ADBLOCK DETECTION                               â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function detectAdBlock() {
            log('Starting AdBlock detection...');
            let results = [];
            
            // TEST 1: Bait Element
            try {
                const bait = document.createElement('div');
                bait.innerHTML = '&nbsp;';
                bait.className = 'adsbox doubleclick ad-placement carbon-ads';
                bait.style.cssText = 'position:fixed;top:-1000px;left:-1000px;width:1px;height:1px;';
                document.body.appendChild(bait);
                
                await new Promise(r => setTimeout(r, 200));
                
                const exists = document.body.contains(bait);
                const visible = bait.offsetHeight > 0;
                
                if (exists) bait.remove();
                
                const blocked = !exists || !visible;
                results.push({ test: 'Bait', blocked });
                log('Bait test: ' + (blocked ? 'BLOCKED' : 'OK'));
            } catch (e) {
                log('Bait test error: ' + e);
                results.push({ test: 'Bait', blocked: false });
            }
            
            // TEST 2: Fake Ad Script
            try {
                const fakeAd = document.createElement('div');
                fakeAd.id = 'ad-test-' + Date.now();
                fakeAd.className = 'adsbygoogle';
                fakeAd.style.cssText = 'width:300px;height:250px;position:fixed;top:-2000px;left:-2000px;';
                fakeAd.innerHTML = '<ins class="adsbygoogle" style="display:block;width:300px;height:250px;"></ins>';
                document.body.appendChild(fakeAd);
                
                await new Promise(r => setTimeout(r, 200));
                
                const stillThere = document.body.contains(fakeAd);
                const hasHeight = fakeAd.offsetHeight > 0;
                
                if (stillThere) fakeAd.remove();
                
                const blocked = !stillThere || !hasHeight;
                results.push({ test: 'FakeAd', blocked });
                log('FakeAd test: ' + (blocked ? 'BLOCKED' : 'OK'));
            } catch (e) {
                log('FakeAd test error: ' + e);
                results.push({ test: 'FakeAd', blocked: false });
            }
            
            // TEST 3: Fetch Ads.js
            try {
                const controller = new AbortController();
                const timeout = setTimeout(() => controller.abort(), 2000);
                
                const response = await fetch('https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js', {
                    method: 'HEAD',
                    mode: 'no-cors',
                    signal: controller.signal
                });
                
                clearTimeout(timeout);
                results.push({ test: 'FetchGoogle', blocked: false });
                log('FetchGoogle test: OK');
            } catch (e) {
                const isTimeout = e.name === 'AbortError';
                results.push({ test: 'FetchGoogle', blocked: !isTimeout });
                log('FetchGoogle test: ' + (isTimeout ? 'TIMEOUT' : 'BLOCKED'));
            }
            
            // TEST 4: Fetch DoubleClick
            try {
                const controller = new AbortController();
                const timeout = setTimeout(() => controller.abort(), 2000);
                
                await fetch('https://static.doubleclick.net/instream/ad_status.js', {
                    method: 'HEAD',
                    mode: 'no-cors',
                    signal: controller.signal
                });
                
                clearTimeout(timeout);
                results.push({ test: 'FetchDC', blocked: false });
                log('FetchDC test: OK');
            } catch (e) {
                const isTimeout = e.name === 'AbortError';
                results.push({ test: 'FetchDC', blocked: !isTimeout });
                log('FetchDC test: ' + (isTimeout ? 'TIMEOUT' : 'BLOCKED'));
            }
            
            // TEST 5: Fetch Facebook Ads
            try {
                const controller = new AbortController();
                const timeout = setTimeout(() => controller.abort(), 2000);
                
                await fetch('https://www.facebook.com/tr/', {
                    method: 'HEAD',
                    mode: 'no-cors',
                    signal: controller.signal
                });
                
                clearTimeout(timeout);
                results.push({ test: 'FetchFB', blocked: false });
                log('FetchFB test: OK');
            } catch (e) {
                const isTimeout = e.name === 'AbortError';
                results.push({ test: 'FetchFB', blocked: !isTimeout });
                log('FetchFB test: ' + (isTimeout ? 'TIMEOUT' : 'BLOCKED'));
            }
            
            // Calculate result - blocked if ANY test fails
            const blockedTests = results.filter(r => r.blocked);
            const isBlocked = blockedTests.length >= 1;
            
            log('AdBlock results: ' + blockedTests.length + '/' + results.length + ' blocked = ' + isBlocked);
            
            return { isBlocked, results };
        }
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                    VPN/PROXY DETECTION                             â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function detectVPN() {
            log('Starting VPN detection...');
            
            const apis = [
                {
                    url: 'https://ipapi.co/json/',
                    getOrg: (d) => d.org || '',
                    getProxy: (d) => d.proxy,
                    getHosting: (d) => d.hosting
                },
                {
                    url: 'https://ipinfo.io/json',
                    getOrg: (d) => d.org || '',
                    getProxy: (d) => false,
                    getHosting: (d) => false
                },
                {
                    url: 'https://ip-api.com/json/?fields=status,org,proxy,hosting,as',
                    getOrg: (d) => (d.org || '') + ' ' + (d.as || ''),
                    getProxy: (d) => d.proxy,
                    getHosting: (d) => d.hosting
                }
            ];
            
            for (const api of apis) {
                try {
                    log('Trying: ' + api.url);
                    
                    const controller = new AbortController();
                    const timeout = setTimeout(() => controller.abort(), 5000);
                    
                    const response = await fetch(api.url, {
                        signal: controller.signal,
                        cache: 'no-store'
                    });
                    
                    clearTimeout(timeout);
                    
                    if (!response.ok) continue;
                    
                    const data = await response.json();
                    log('API response: ' + JSON.stringify(data));
                    
                    // Check explicit flags
                    if (api.getProxy(data) === true) {
                        log('VPN: Proxy flag TRUE');
                        return { isVPN: true, reason: 'Proxy flag', data };
                    }
                    
                    if (api.getHosting(data) === true) {
                        log('VPN: Hosting flag TRUE');
                        return { isVPN: true, reason: 'Hosting flag', data };
                    }
                    
                    // Check organization
                    const org = api.getOrg(data).toLowerCase();
                    log('Checking org: ' + org);
                    
                    const vpnKeywords = [
                        // VPN Providers
                        'nordvpn', 'expressvpn', 'protonvpn', 'proton ag', 'surfshark',
                        'mullvad', 'private internet', 'cyberghost', 'ipvanish',
                        'windscribe', 'hotspot shield', 'tunnelbear', 'purevpn',
                        'vyprvpn', 'hide.me', 'zenmate', 'torguard', 'ivacy',
                        'perfect privacy', 'airvpn', 'astrill', 'trust.zone',
                        
                        // Hosting/Cloud (often used for VPN)
                        'digitalocean', 'amazon', 'aws', 'google cloud', 'microsoft azure',
                        'linode', 'vultr', 'hetzner', 'ovh', 'scaleway',
                        'choopa', 'm247', 'datacamp', 'leaseweb', 'psychz',
                        
                        // Tor
                        'tor exit', 'tor relay', 'tor network'
                    ];
                    
                    for (const keyword of vpnKeywords) {
                        if (org.includes(keyword)) {
                            log('VPN: Found keyword: ' + keyword);
                            return { isVPN: true, reason: 'Keyword: ' + keyword, data };
                        }
                    }
                    
                    // No VPN detected
                    log('VPN: Not detected');
                    return { isVPN: false, reason: 'Clean', data };
                    
                } catch (e) {
                    log('API error: ' + e.message);
                    continue;
                }
            }
            
            // All APIs failed - don't block
            log('VPN: All APIs failed, allowing');
            return { isVPN: false, reason: 'API Error' };
        }
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                      URL PARAMETERS                                â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get('token');
        const movieName = urlParams.get('movie') || urlParams.get('name') || 'Your File';
        const quality = urlParams.get('quality') || '';
        const fileSize = urlParams.get('size') || '';
        let callbackUrl = urlParams.get('callback');
        
        if (!callbackUrl && token) {
            callbackUrl = `https://t.me/${BOT_USERNAME}?start=token_${token}`;
        }
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                      UI FUNCTIONS                                  â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function hideAll() {
            document.getElementById('loadingContainer').style.display = 'none';
            document.getElementById('adblockBlocked').classList.remove('show');
            document.getElementById('vpnBlocked').classList.remove('show');
            document.getElementById('bothBlocked').classList.remove('show');
            document.getElementById('mainContainer').classList.remove('show');
        }
        
        function showLoading() { hideAll(); document.getElementById('loadingContainer').style.display = 'block'; }
        function showAdBlockBlocked() { hideAll(); document.getElementById('adblockBlocked').classList.add('show'); }
        function showVPNBlocked() { hideAll(); document.getElementById('vpnBlocked').classList.add('show'); }
        function showBothBlocked() { hideAll(); document.getElementById('bothBlocked').classList.add('show'); }
        
        function showMainContent() {
            hideAll();
            document.getElementById('mainContainer').classList.add('show');
            initMain();
            
            // Hide debug in production
            if (!DEBUG_MODE) {
                document.getElementById('debugInfo').style.display = 'none';
            }
        }
        
        function showError(msg) {
            hideAll();
            document.getElementById('loadingContainer').style.display = 'block';
            document.getElementById('loadingContainer').innerHTML = `
                <div style="font-size:70px;margin-bottom:20px;">âŒ</div>
                <p style="color:#ff4444;font-size:18px;">Error</p>
                <p style="color:#888;font-size:14px;margin-top:15px;">${msg}</p>
            `;
        }
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                    MAIN INIT                                       â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function initMain() {
            try { document.getElementById('movieName').textContent = decodeURIComponent(movieName); }
            catch(e) { document.getElementById('movieName').textContent = movieName; }
            
            if (quality) {
                document.getElementById('qualityInfo').style.display = 'block';
                document.getElementById('qualityText').textContent = quality;
            }
            if (fileSize) {
                document.getElementById('sizeInfo').style.display = 'block';
                document.getElementById('sizeText').textContent = fileSize;
            }
            
            document.getElementById('btnStep1').href = ADSTERRA_SMART_LINK;
            document.getElementById('btnStep2').href = callbackUrl || '#';
            
            startCountdown();
        }
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                       COUNTDOWN                                    â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        let timeLeft = WAIT_TIME;
        let countdownInterval = null;
        let paused = false;
        
        function updateStep(el, status) {
            if (!el) return;
            el.classList.remove('active', 'done');
            if (status === 'active') el.classList.add('active');
            if (status === 'done') {
                el.classList.add('done');
                el.querySelector('.step-icon').textContent = 'âœ“';
            }
        }
        
        function startCountdown() {
            if (countdownInterval) return;
            
            countdownInterval = setInterval(() => {
                if (paused) return;
                
                timeLeft--;
                document.getElementById('timer').textContent = Math.max(0, timeLeft);
                document.getElementById('progress').style.width = ((WAIT_TIME - timeLeft) / WAIT_TIME * 100) + '%';
                
                if (timeLeft > 14) {
                    updateStep(document.getElementById('stepVerify'), 'active');
                    document.getElementById('status').textContent = 'ğŸ” Verifying...';
                } else if (timeLeft > 7) {
                    updateStep(document.getElementById('stepVerify'), 'done');
                    updateStep(document.getElementById('stepLoad'), 'active');
                    document.getElementById('status').textContent = 'ğŸ“¦ Loading...';
                } else if (timeLeft > 0) {
                    updateStep(document.getElementById('stepLoad'), 'done');
                    updateStep(document.getElementById('stepReady'), 'active');
                    document.getElementById('status').textContent = 'âš¡ Almost ready...';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(countdownInterval);
                    updateStep(document.getElementById('stepReady'), 'done');
                    document.getElementById('timer').textContent = 'âœ…';
                    document.getElementById('timer').classList.add('ready');
                    document.getElementById('status').textContent = 'ğŸ‰ Ready!';
                    document.getElementById('btnContainer').classList.add('show');
                }
            }, 1000);
        }
        
        document.addEventListener('visibilitychange', () => {
            paused = document.hidden;
        });
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                     BUTTONS                                        â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        let step1Done = false;
        
        function completeStep1() {
            if (step1Done) { showStep2(); return false; }
            step1Done = true;
            window.open(ADSTERRA_SMART_LINK, '_blank');
            setTimeout(showStep2, 2000);
            return false;
        }
        
        function showStep2() {
            document.getElementById('btnStep1').classList.add('hidden');
            document.getElementById('btnStep2').classList.remove('hidden');
            document.getElementById('dot1').classList.remove('active');
            document.getElementById('dot1').classList.add('done');
            document.getElementById('dot2').classList.add('active');
            document.getElementById('noteText').innerHTML = 'Tap <strong>Get File</strong> â†’ <strong>START</strong>';
        }
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                      INIT                                          â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function init() {
            if (!token && !callbackUrl) {
                showError('Invalid link. Get new link from bot.');
                return;
            }
            
            showLoading();
            updateDebug('Running checks...');
            
            // Run both checks
            const [adResult, vpnResult] = await Promise.all([
                detectAdBlock(),
                detectVPN()
            ]);
            
            adBlockDetected = adResult.isBlocked;
            vpnDetected = vpnResult.isVPN;
            
            // Update debug
            let debugText = `<b>AdBlock:</b> ${adBlockDetected ? 'âŒ BLOCKED' : 'âœ… OK'}<br>`;
            debugText += `Tests: ${adResult.results.map(r => r.test + ':' + (r.blocked ? 'âŒ' : 'âœ…')).join(', ')}<br>`;
            debugText += `<b>VPN:</b> ${vpnDetected ? 'âŒ ' + vpnResult.reason : 'âœ… OK'}<br>`;
            updateDebug(debugText);
            
            log('Final: AdBlock=' + adBlockDetected + ', VPN=' + vpnDetected);
            
            // Show result
            await new Promise(r => setTimeout(r, 500));
            
            if (adBlockDetected && vpnDetected) {
                showBothBlocked();
            } else if (adBlockDetected) {
                showAdBlockBlocked();
            } else if (vpnDetected) {
                showVPNBlocked();
            } else {
                showMainContent();
            }
        }
        
        // Start
        init();
    </script>

</body>
</html>
